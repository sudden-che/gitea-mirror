# Gitea Push Mirror Automation

–°–∫—Ä–∏–ø—Ç –Ω–∞ Python –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏—è (Push Mirror) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –º–µ–∂–¥—É –¥–≤—É–º—è –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏ Gitea.

## üîß –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ü–æ–ª—É—á–∞–µ—Ç **–≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –ª–∏—á–Ω—ã–µ, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ, –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ.
- –°–æ–∑–¥–∞—ë—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞ —Ü–µ–ª–µ–≤–æ–º Gitea.
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç Push Mirror —Å `sync_on_commit`.
- –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –µ—Å–ª–∏ –∑–µ—Ä–∫–∞–ª–∞ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `--dry-run` –∏ `--insecure` —Ä–µ–∂–∏–º—ã.
- –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ REST API, –∏—Å–ø–æ–ª—å–∑—É—è `Authorization: token ...` –∑–∞–≥–æ–ª–æ–≤–∫–∏.

---

## üöÄ –ó–∞–ø—É—Å–∫

1. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -r requirements.txt
```

2. –°–æ–∑–¥–∞–π .env —Ñ–∞–π–ª (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –Ω–∏–∂–µ):

# .env
```bash
SRC_GITEA_URL=https://your-gitea1.com
SRC_GITEA_TOKEN=—Ç–æ–∫–µ–Ω_–æ—Ç_source_gitea

DEST_GITEA_URL=https://your-gitea2.com
DEST_GITEA_TOKEN=—Ç–æ–∫–µ–Ω_–æ—Ç_target_gitea
DEST_GITEA_USER=your-user
```

3. –ó–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç:


```bash
python mirror_script.py --insecure           # –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç SSL –æ—à–∏–±–∫–∏
python mirror_script.py --dry-run            # —ç–º—É–ª–∏—Ä—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
python mirror_script.py --dry-run --insecure
``````



## –°–∫—Ä–∏–ø—Ç

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–∞ target.
–ï—Å–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞—ë—Ç –µ–≥–æ.
–ï—Å–ª–∏ push mirror —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω ‚Äî –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–≥–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ.
–ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤—ã–≤–æ–¥–∏—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è.
